'use strict';

exports.__esModule = true;
exports.getFormData = getFormData;

var _stream = require('stream');

/**
 * Detects the input source (Stream or FormData) and returns a FormData
 * @param  {Stream|FormData} source  - a stream or precreated FormData
 * @return {FormData}      - the FormData to be sent to Smooch
 */
function getFormData(source) {
    var data = void 0;

    // The `instanceof` keyword does not work across frames, so we rely on this logic to differentiate between a Stream and a FormData object
    // Logic taken from node-fetch https://github.com/bitinn/node-fetch/blob/master/src/body.js#L375
    if (source instanceof _stream.Stream && typeof source.getBoundary !== 'function') {
        data = new FormData();
        data.append('source', source);
    } else {
        data = source;
    }

    return data;
}